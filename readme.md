# Slackbot written in Go

Kind of a framework (?) with a dummy action by default.

Fires off a main process that responds quickly, and then farms out additional work to goroutines that return (post messages to slack) whenever they're ready.

Based on the tutorial at https://towardsdatascience.com/develop-a-slack-bot-using-golang-1025b3e606bc


## Features
Slash command handling (example: /greet)
Handles @


## TODO/questions/ideas
- currently running in socket mode instead of with ngrok (and a real endpoint), because the bot doesn't provide HTTP routing yet, which is required for slack's /challenge POST
- How to handle bot token rotation? Maybe read it in from an env var instead of the .env file? (makes it easy to run via nomad or k8s or ECS or Lambda or whatever)

YOU LEFT OFF HERE (tutorial): "Advance slash commands and interactions"  -- question-and-response

Todo future ngrok/real-webapp local dev setup
- start the app so it's listening on :8080
- fire up ngrok with `ngrok http 8080` and grab the https forwarding URL
- install ngrok


## Development Workflow
go run main.go


## Bootstrapping instructions
1. create slack workspace
1. create an app (from scratch) --> bots --> assign scope to bot token -> settings, install app [use these instructions](https://towardsdatascience.com/develop-a-slack-bot-using-golang-1025b3e606bc)
1. invite the bot to your channel: "/invite @goslackbot"

1. ```
go get -u github.com/slack-go/slack
go get -u github.com/joho/godotenv
go get -u github.com/slack-go/slack/socketmode
```

1. enable events in your slack app's "event subscriptions" page
1. "subscribe to bot events" on the same page: `app_mention`
1. Go into Settings->Basic Information and scroll down to the chapter called App-Level Tokens and press Generate Tokens and Scope and fill in a name for your Token. Give it connections:write scope and copy the token that's autogenerated: xapp-1-A037N542XHC-3267189828995-042f722e24b899d1b1d7016371e7d3f38e9f84f112c9fa77f792188b26a39031



## Design
A small go project, running in lambda, which is managed via terraform?
Git webhooks?

